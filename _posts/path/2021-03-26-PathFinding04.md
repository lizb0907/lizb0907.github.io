---
layout: post
title: 服务器寻路04-漏斗算法
categories: Path
description: 漏斗算法
keywords: 游戏，寻路, 漏斗算法
---

服务器寻路04-漏斗算法

**目录**

* TOC
{:toc}

## A*算法应用于三角形网格

### 1.三角形导航网格

```sh
1.方格地图网格都是规则的正方形网格，因此在计算网格距离时，只需要计算网格中心点之间的距离。
2.与方格网格地图不同，A*用于三角网络导航网格具有不规则性，导致 G（n）值和 h（n）的计算不能统一。  
```

### 2.需要对 G（n）值和 h（n）的计算方法加以改进

![](/images/posts/findpath/3.jpg)

```sh
改进策略：
  G（n）为当前三角网格至下一个网格代价总和，H（n）为三角形中心到目标三角中心的距离。
```

![](/images/posts/findpath/4.jpg)

```sh
如上图公式：
     三角网格自身代价为穿入边 AB 中点至穿出边 AC 中点的距离。
     因为AB中心点和AC中心点相连的长度即为BC边长度的一半，所以穿入边和穿出边中心相连的长度即等于上图公式计算所得的值。
```

## 漏斗算法路径平滑处理
